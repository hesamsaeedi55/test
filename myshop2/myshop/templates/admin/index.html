{% extends "admin/index.html" %}
{% load static %}

{% block content %}
    <div style="margin-bottom: 20px; padding: 15px; background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 5px;">
        <h3 style="margin-top: 0; color: #495057;">Ù…Ø¯ÛŒØ±ÛŒØª ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</h3>
        <p style="color: #6c757d; margin-bottom: 15px;">
            Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯
        </p>
        <div style="display: flex; gap: 10px; align-items: center;">
            <select id="categorySelect" 
                    style="padding: 10px; border: 2px solid #dee2e6; border-radius: 4px; font-size: 14px; width: 300px;">
                <option value="">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</option>
            </select>
            <button onclick="openCategoryAttributes()" 
                    style="background: #007bff; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; font-weight: 500;">
                ğŸ”§ Ù…Ø¯ÛŒØ±ÛŒØª ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§
            </button>
        </div>
    </div>
    
    <script>
        // Load categories on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadCategories();
        });
        
        async function loadCategories() {
            try {
                const response = await fetch('/shop/api/categories/simple/');
                const data = await response.json();
                const select = document.getElementById('categorySelect');
                
                select.innerHTML = '<option value="">-- Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ --</option>';
                
                if (data.categories) {
                    data.categories.forEach(category => {
                        const option = document.createElement('option');
                        option.value = category.id;
                        option.textContent = `${category.name} (ID: ${category.id})`;
                        select.appendChild(option);
                    });
                }
            } catch (error) {
                console.error('Error loading categories:', error);
                const select = document.getElementById('categorySelect');
                select.innerHTML = '<option value="">Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§</option>';
            }
        }
        
        function openCategoryAttributes() {
            const categoryId = document.getElementById('categorySelect').value;
            if (!categoryId) {
                alert('Ù„Ø·ÙØ§Ù‹ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
                return;
            }
            const url = `http://127.0.0.1:8000/shop/manage/category/${categoryId}/attributes/`;
            window.open(url, '_blank');
        }
    </script>
    
    {{ block.super }}
{% endblock %}